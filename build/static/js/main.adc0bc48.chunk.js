(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(15),r=t.n(a),u=t(6),o=t(3),i=t(0),s=function(e){var n=e.name,t=e.number,c=e.handleClick;return Object(i.jsxs)("p",{children:[n," ",t," ",Object(i.jsx)("button",{onClick:c,children:"Delete"})]})},j=function(e){var n=e.handleClick,t=e.text;return Object(i.jsxs)("p",{children:[t," ",Object(i.jsx)("input",{onChange:n})]})},b=function(e){var n=e.handleClick,t=e.value;return Object(i.jsx)("div",{children:Object(i.jsx)("input",{value:t,onChange:n})})},d=function(e){var n=e.handleClick,t=e.values,c=(e.text,Object(o.a)(n,3)),a=c[0],r=c[1],u=c[2],s=Object(o.a)(t,2),j=s[0],d=s[1];return Object(i.jsxs)("form",{onSubmit:a,children:["name: ",Object(i.jsx)(b,{handleClick:r,value:j}),"number: ",Object(i.jsx)(b,{handleClick:u,value:d}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.message;return Object(i.jsx)("div",{className:"success",children:n})},h=function(e){var n=e.message;return Object(i.jsx)("div",{className:"error",children:n})},f=t(4),m=t.n(f),O="api/persons",v=function(){return m.a.get(O).then((function(e){return e.data}))},x=function(e){return m.a.post(O,e).then((function(e){return e.data}))},p=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},k=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},C=function(e,n,t){e(n),setTimeout((function(){e("")}),t)},w=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),b=Object(o.a)(r,2),f=b[0],m=b[1],O=Object(c.useState)(""),w=Object(o.a)(O,2),g=w[0],S=w[1],D=Object(c.useState)([]),L=Object(o.a)(D,2),y=L[0],N=L[1],E=Object(c.useState)(""),J=Object(o.a)(E,2),A=J[0],B=J[1],I=Object(c.useState)(""),P=Object(o.a)(I,2),T=P[0],q=P[1];Object(c.useEffect)((function(){v().then((function(e){a(e)}))}),[]);var z=0===y.length?t:y;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),A?Object(i.jsx)(l,{message:A}):T?Object(i.jsx)(h,{message:T}):"",Object(i.jsx)(j,{handleClick:function(e){var n=e.target.value.toLowerCase(),c=t.filter((function(e){return e.name.toLowerCase().includes(n)}));N(c)},text:"filter shown with:"}),Object(i.jsx)("h1",{children:"add a new"}),Object(i.jsx)(d,{handleClick:[function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===f.trim().toLowerCase()}));n?window.confirm("".concat(f," is already added to the phonebook, replace the old number with a new one?"))&&k(n.id,Object(u.a)(Object(u.a)({},n),{},{number:g})).then((function(e){a(t.map((function(n){return n.name!==e.name?n:e}))),C(B,"".concat(e.name,"'s number has been changed."),3e3)})).catch((function(e){C(q,e.response.data.error,3e3)})):x({name:f,number:g}).then((function(e){a(t.concat(e)),C(B,"Added ".concat(e.name),3e3)})).catch((function(e){C(q,e.response.data.error,3e3)}));m(""),S("")},function(e){m(e.target.value)},function(e){S(e.target.value)}],values:[f,g]}),Object(i.jsx)("h2",{children:"Numbers"}),z.map((function(e){return Object(i.jsx)(s,{name:e.name,number:e.number,handleClick:function(){return function(e){var n=t.filter((function(n){return n.id===e})).map((function(e){return e.name}))[0];window.confirm("Delete ".concat(n,"?"))&&p(e).then((function(c){a(t.filter((function(n){return n.id!==e}))),C(B,"Deleted ".concat(n," from the server"),3e3)})).catch((function(e){return console.log(e)}))}(e.id)}},e.id)}))]})};t(39);r.a.render(Object(i.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.adc0bc48.chunk.js.map